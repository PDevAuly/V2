{"ast":null,"code":"import React,{useState,useEffect}from'react';import{User,Clock,Settings,RotateCcw,Calculator,TrendingUp,Network,ChevronRight,Sun,Moon,X,Save,Eye,EyeOff,Edit3}from'lucide-react';import OnboardingSection from'../features/onboarding/OnboardingSection.jsx';import CalculationSection from'../features/kalkulation/calculationSection.jsx';import useDarkMode from'../hooks/useDarkMode';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Dashboard(_ref){var _menuItems$find;let{onLogout,userInfo}=_ref;const[activeSection,setActiveSection]=useState('overview');const[showProfile,setShowProfile]=useState(false);const[showProfileModal,setShowProfileModal]=useState(false);const[loading,setLoading]=useState(false);const[currentOnboardingStep,setCurrentOnboardingStep]=useState(1);const{isDark,toggle}=useDarkMode();// Passwort ändern States\nconst[passwordData,setPasswordData]=useState({currentPassword:'',newPassword:'',confirmPassword:'',showCurrentPassword:false,showNewPassword:false,showConfirmPassword:false});// API_BASE vereinfacht - verwendet Proxy\nconst API_BASE='/api';const euro=n=>new Intl.NumberFormat('de-DE',{style:'currency',currency:'EUR'}).format(Number(n||0));// Vereinfachte getJson Funktion\nconst getJson=async res=>{if(!res.ok){throw new Error(`HTTP ${res.status}: ${res.statusText}`);}return res.json();};// Daten-States (Projekte entfernt)\nconst[stats,setStats]=useState({activeCustomers:0,monthlyHours:0,monthlyRevenue:0});const[customers,setCustomers]=useState([]);const[kalkulationen,setKalkulationen]=useState([]);const[calculationForm,setCalculationForm]=useState({kunde_id:'',stundensatz:85,dienstleistungen:[]});const[mwst,setMwst]=useState(19);// Onboarding-States\nconst[onboardingCustomerData,setOnboardingCustomerData]=useState({firmenname:'',strasse:'',hausnummer:'',ort:'',plz:'',telefonnummer:'',email:'',ansprechpartner:{name:'',vorname:'',email:'',telefonnummer:'',position:''}});const[infrastructureData,setInfrastructureData]=useState({netzwerk:{internetzugangsart:'',feste_ip_vorhanden:false,vpn_einwahl_erforderlich:false,aktuelle_vpn_user:'',geplante_vpn_user:'',firewall_modell:'',ip_adresse:'',informationen:''},hardware:{typ:'',hersteller:'',modell:'',seriennummer:'',standort:'',ip:'',details_jsonb:{},// JSON-Objekt\ninformationen:''},mail:{anbieter:'',anzahl_postfach:'',anzahl_shared:'',gesamt_speicher:'',pop3_connector:false,mobiler_zugriff:false,informationen:''},software:{name:'',licenses:'',critical:'',requirements:[],description:'',verwendete_applikationen_text:'',verwendete_applikationen:[]},backup:{tool:'',interval:'',retention:'',location:'',size:'',info:''},sonstiges:{text:''}});useEffect(()=>{loadDashboardData();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);const loadDashboardData=async()=>{try{setLoading(true);// Teste zuerst die Verbindung\nconst testRes=await fetch(`${API_BASE}/test`);if(!testRes.ok)throw new Error('Backend nicht erreichbar');const[statsRes,customersRes,kalkulationenRes]=await Promise.all([fetch(`${API_BASE}/kalkulationen/stats`),fetch(`${API_BASE}/customers`),fetch(`${API_BASE}/kalkulationen`)]);// Check if responses are ok\nif(!statsRes.ok)throw new Error('Stats endpoint failed');if(!customersRes.ok)throw new Error('Customers endpoint failed');if(!kalkulationenRes.ok)throw new Error('Kalkulationen endpoint failed');const[statsData,customersData,kalkulationenData]=await Promise.all([statsRes.json(),customersRes.json(),kalkulationenRes.json()]);const mappedStats={activeCustomers:Array.isArray(customersData)?customersData.length:0,monthlyHours:Number((statsData===null||statsData===void 0?void 0:statsData.monthlyHours)||(statsData===null||statsData===void 0?void 0:statsData.avg_zeit)||0),monthlyRevenue:Number((statsData===null||statsData===void 0?void 0:statsData.monthlyRevenue)||(statsData===null||statsData===void 0?void 0:statsData.total_umsatz)||0)};setStats(mappedStats);setCustomers(customersData!==null&&customersData!==void 0?customersData:[]);setKalkulationen(kalkulationenData!==null&&kalkulationenData!==void 0?kalkulationenData:[]);}catch(error){console.warn('Fallback auf Mock-Daten:',error);// Setze sinnvolle Mock-Daten als Fallback\nsetStats({activeCustomers:12,monthlyHours:85,monthlyRevenue:7225});setCustomers([{kunden_id:1,firmenname:'Beispielkunde GmbH',email:'info@beispiel.de',strasse:'Musterstraße',hausnummer:'123',ort:'Musterstadt',plz:'12345',telefonnummer:'0123456789'}]);setKalkulationen([{kalkulations_id:1,kunde_name:'Beispielkunde GmbH',datum:new Date().toISOString(),gesamtzeit:8,gesamtpreis:680,status:'neu',stundensatz:85}]);}finally{setLoading(false);}};const changePassword=async()=>{if(passwordData.newPassword!==passwordData.confirmPassword){alert('❌ Die neuen Passwörter stimmen nicht überein');return;}if(passwordData.newPassword.length<6){alert('❌ Das neue Passwort muss mindestens 6 Zeichen lang sein');return;}try{setLoading(true);await new Promise(resolve=>setTimeout(resolve,1000));alert('✅ Passwort erfolgreich geändert!');setPasswordData({currentPassword:'',newPassword:'',confirmPassword:'',showCurrentPassword:false,showNewPassword:false,showConfirmPassword:false});}catch(error){console.error('Fehler beim Ändern des Passworts:',error);alert('❌ Fehler beim Ändern des Passworts');}finally{setLoading(false);}};const handleFinalOnboardingSubmit=async()=>{setLoading(true);try{var _customerResult$kunde;const customerResponse=await fetch(`${API_BASE}/customers`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(onboardingCustomerData)});if(!customerResponse.ok){const errorData=await customerResponse.text();throw new Error(`Fehler beim Erstellen des Kunden: ${errorData}`);}const customerResult=await customerResponse.json();const kundeId=((_customerResult$kunde=customerResult.kunde)===null||_customerResult$kunde===void 0?void 0:_customerResult$kunde.kunden_id)||customerResult.kunden_id;const onboardingResponse=await fetch(`${API_BASE}/onboarding`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({kunde_id:kundeId,infrastructure_data:infrastructureData})});if(!onboardingResponse.ok){const errorData=await onboardingResponse.text();throw new Error(`Fehler beim Erstellen des Onboardings: ${errorData}`);}alert('✅ Kunde und IT-Infrastruktur erfolgreich erfasst!');setCurrentOnboardingStep(1);setOnboardingCustomerData({firmenname:'',strasse:'',hausnummer:'',ort:'',plz:'',telefonnummer:'',email:'',ansprechpartner:{name:'',vorname:'',email:'',telefonnummer:'',position:''}});setInfrastructureData({netzwerk:{internetzugangsart:'',feste_ip_vorhanden:false,vpn_einwahl_erforderlich:false,aktuelle_vpn_user:'',geplante_vpn_user:'',firewall_modell:'',ip_adresse:'',informationen:''},hardware:{typ:'',hersteller:'',modell:'',seriennummer:'',standort:'',ip:'',details_jsonb:{},informationen:''},mail:{anbieter:'',anzahl_postfach:'',anzahl_shared:'',gesamt_speicher:'',pop3_connector:false,mobiler_zugriff:false,informationen:''},software:{name:'',licenses:'',critical:'',requirements:[],description:'',verwendete_applikationen_text:'',verwendete_applikationen:[]},backup:{tool:'',interval:'',retention:'',location:'',size:'',info:''},sonstiges:{text:''}});loadDashboardData();}catch(error){console.error('Error:',error);alert('❌ Fehler beim Speichern: '+error.message);}finally{setLoading(false);}};const handleCalculationSubmit=async e=>{e.preventDefault();if(!calculationForm.kunde_id){alert('Bitte einen Kunden auswählen.');return;}setLoading(true);try{const payload={kunde_id:calculationForm.kunde_id,stundensatz:calculationForm.stundensatz===''||calculationForm.stundensatz===undefined?null:Number(calculationForm.stundensatz)||0,mwst:Number(mwst)||0,dienstleistungen:(calculationForm.dienstleistungen||[]).map(d=>{var _d$section;return{beschreibung:d.beschreibung,section:(_d$section=d.section)!==null&&_d$section!==void 0?_d$section:null,anzahl:Number(d.anzahl)||0,dauer_pro_einheit:Number(d.dauer_pro_einheit)||0,info:(d.info||'').trim()||null,stundensatz:d.stundensatz===undefined||d.stundensatz===''?null:Number(d.stundensatz)||0};})};const response=await fetch(`${API_BASE}/kalkulationen`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});if(!response.ok){const errorData=await response.text();throw new Error(errorData||'Unbekannter Fehler');}const data=await response.json();alert('✅ Kalkulation wurde erfolgreich erstellt!');setCalculationForm({kunde_id:'',stundensatz:85,dienstleistungen:[]});await loadDashboardData();}catch(error){console.error('Error creating calculation:',error);alert('❌ Fehler beim Erstellen der Kalkulation: '+error.message);}finally{setLoading(false);}};const menuItems=[{id:'overview',label:'Übersicht',icon:TrendingUp,color:'text-blue-600 dark:text-blue-400'},{id:'onboarding',label:'Kunden-Onboarding',icon:Network,color:'text-purple-600 dark:text-purple-400'},{id:'stundenkalkulation',label:'Stundenkalkulation',icon:Calculator,color:'text-orange-600 dark:text-orange-400'}];// ... rest of the code remains the same (renderProfileModal, renderContent, return statement) ...\n// Der restliche Code bleibt unverändert\nconst renderProfileModal=()=>/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 w-full max-w-md mx-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold text-gray-900 dark:text-gray-100\",children:\"Profil anzeigen\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowProfileModal(false),className:\"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300\",children:/*#__PURE__*/_jsx(X,{className:\"w-5 h-5\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 space-y-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center mb-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-20 h-20 bg-yellow-400 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(User,{className:\"w-10 h-10 text-gray-900\"})})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\",children:\"Angemeldet als\"}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-gray-100 dark:bg-gray-600 text-gray-700 dark:text-gray-300\",children:(userInfo===null||userInfo===void 0?void 0:userInfo.email)||'Nicht verfügbar'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-t border-gray-200 dark:border-gray-700 pt-4 mt-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-gray-900 dark:text-gray-100 mb-3\",children:\"Passwort \\xE4ndern\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"input\",{type:passwordData.showCurrentPassword?'text':'password',value:passwordData.currentPassword,onChange:e=>setPasswordData({...passwordData,currentPassword:e.target.value}),placeholder:\"Aktuelles Passwort\",className:\"w-full px-3 py-2 pr-10 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setPasswordData({...passwordData,showCurrentPassword:!passwordData.showCurrentPassword}),className:\"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600\",children:passwordData.showCurrentPassword?/*#__PURE__*/_jsx(EyeOff,{className:\"w-4 h-4\"}):/*#__PURE__*/_jsx(Eye,{className:\"w-4 h-4\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"input\",{type:passwordData.showNewPassword?'text':'password',value:passwordData.newPassword,onChange:e=>setPasswordData({...passwordData,newPassword:e.target.value}),placeholder:\"Neues Passwort\",className:\"w-full px-3 py-2 pr-10 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setPasswordData({...passwordData,showNewPassword:!passwordData.showNewPassword}),className:\"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600\",children:passwordData.showNewPassword?/*#__PURE__*/_jsx(EyeOff,{className:\"w-4 h-4\"}):/*#__PURE__*/_jsx(Eye,{className:\"w-4 h-4\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"input\",{type:passwordData.showConfirmPassword?'text':'password',value:passwordData.confirmPassword,onChange:e=>setPasswordData({...passwordData,confirmPassword:e.target.value}),placeholder:\"Neues Passwort best\\xE4tigen\",className:\"w-full px-3 py-2 pr-10 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setPasswordData({...passwordData,showConfirmPassword:!passwordData.showConfirmPassword}),className:\"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600\",children:passwordData.showConfirmPassword?/*#__PURE__*/_jsx(EyeOff,{className:\"w-4 h-4\"}):/*#__PURE__*/_jsx(Eye,{className:\"w-4 h-4\"})})]}),passwordData.currentPassword&&passwordData.newPassword&&passwordData.confirmPassword&&/*#__PURE__*/_jsxs(\"button\",{onClick:changePassword,disabled:loading,className:\"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 transition-colors flex items-center justify-center space-x-2\",children:[/*#__PURE__*/_jsx(Save,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Passwort \\xE4ndern\"})]})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-end p-6 border-t border-gray-200 dark:border-gray-700\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowProfileModal(false),className:\"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors\",children:\"Schlie\\xDFen\"})})]})});const renderContent=()=>{switch(activeSection){case'onboarding':return/*#__PURE__*/_jsx(\"div\",{className:isDark?'dark':'',children:/*#__PURE__*/_jsx(OnboardingSection,{isDark:isDark,currentOnboardingStep:currentOnboardingStep,setCurrentOnboardingStep:setCurrentOnboardingStep,onboardingCustomerData:onboardingCustomerData,setOnboardingCustomerData:setOnboardingCustomerData,infrastructureData:infrastructureData,setInfrastructureData:setInfrastructureData,loading:loading,onFinalSubmit:handleFinalOnboardingSubmit})});case'stundenkalkulation':return/*#__PURE__*/_jsx(\"div\",{className:isDark?'dark':'',children:/*#__PURE__*/_jsx(CalculationSection,{isDark:isDark,customers:customers,calculationForm:calculationForm,setCalculationForm:setCalculationForm,mwst:mwst,setMwst:setMwst,loading:loading,onSubmit:handleCalculationSubmit})});default:return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-semibold text-gray-900 dark:text-gray-100 mb-2\",children:\"Dashboard \\xDCbersicht\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 dark:text-gray-400\",children:\"Aktuelle Statistiken und Kalkulationen\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-6\",children:[{icon:User,bg:'bg-blue-500',label:'Kunden',value:stats.activeCustomers},{icon:Clock,bg:'bg-orange-500',label:'Stunden (Ø/Monat)',value:Math.round(stats.monthlyHours)+'h'},{icon:TrendingUp,bg:'bg-purple-500',label:'Umsatz (Monat)',value:euro(stats.monthlyRevenue)}].map((item,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"div\",{className:`w-8 h-8 ${item.bg} rounded-md flex items-center justify-center`,children:/*#__PURE__*/_jsx(item.icon,{className:\"w-4 h-4 text-white\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600 dark:text-gray-300\",children:item.label}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-semibold text-gray-900 dark:text-gray-100\",children:item.value})]})]})},index))}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-4 border-b border-gray-200 dark:border-gray-700\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 dark:text-gray-100\",children:\"Aktuelle Kalkulationen\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600\",children:/*#__PURE__*/_jsx(\"tr\",{children:['Kunde','Datum','Stunden','Gesamtpreis','Status'].map(header=>/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\",children:header},header))})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700\",children:kalkulationen.slice(0,5).map(kalkulation=>/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50 dark:hover:bg-gray-700\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-900 dark:text-gray-100\",children:kalkulation.kunde_name||kalkulation.firmenname||'—'})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-900 dark:text-gray-300\",children:kalkulation.datum?new Date(kalkulation.datum).toLocaleDateString('de-DE'):'—'})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-gray-900 dark:text-gray-300\",children:[Number(kalkulation.gesamtzeit||0),\"h\"]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-900 dark:text-gray-300\",children:euro(kalkulation.gesamtpreis)})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"span\",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${kalkulation.status==='erledigt'?'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200':kalkulation.status==='in Arbeit'?'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200':'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200'}`,children:kalkulation.status||'neu'})})]},kalkulation.kalkulations_id))})]})})]})]});}};return/*#__PURE__*/_jsxs(\"div\",{className:`h-screen flex bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 ${isDark?'dark':''}`,children:[loading&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black/10 dark:bg-black/30 backdrop-blur-sm flex items-center justify-center z-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 px-4 py-2 rounded shadow\",children:\"Lade Daten\\u2026\"})}),showProfileModal&&renderProfileModal(),/*#__PURE__*/_jsxs(\"div\",{className:\"w-64 bg-white dark:bg-gray-950 border-r border-gray-200 dark:border-gray-800 flex flex-col\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-4 border-b border-gray-200 dark:border-gray-800\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-bold text-gray-800 dark:text-gray-100\",children:\"Pauly Dashboard\"})}),/*#__PURE__*/_jsxs(\"nav\",{className:\"flex-1 p-4 space-y-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3\",children:\"BEREICHE\"}),menuItems.map(item=>{const IconComponent=item.icon;const isActive=activeSection===item.id;return/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveSection(item.id),className:`w-full flex items-center space-x-3 px-3 py-2 rounded-md text-sm font-medium transition-colors ${isActive?'bg-blue-50 text-blue-700 border-l-4 border-blue-600 dark:bg-blue-900/30 dark:text-blue-300 dark:border-blue-400':'text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-800'}`,children:[/*#__PURE__*/_jsx(IconComponent,{className:`w-4 h-4 ${isActive?'text-blue-600 dark:text-blue-400':'text-gray-500 dark:text-gray-400'}`}),/*#__PURE__*/_jsx(\"span\",{className:\"flex-1 text-left\",children:item.label}),isActive&&/*#__PURE__*/_jsx(ChevronRight,{className:\"w-4 h-4 text-blue-600 dark:text-blue-400\"})]},item.id);})]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-4 border-t border-gray-200 dark:border-gray-800\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 flex flex-col\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"bg-white dark:bg-gray-950 border-b border-gray-200 dark:border-gray-800 px-6 py-3 grid grid-cols-[1fr_auto_1fr] items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"justify-self-start\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"sr-only\",children:((_menuItems$find=menuItems.find(item=>item.id===activeSection))===null||_menuItems$find===void 0?void 0:_menuItems$find.label)||'Dashboard'})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setActiveSection('overview'),className:\"justify-self-center\",\"aria-label\":\"Zur \\xDCbersicht\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/pauly_logo4.png\",alt:\"Pauly Logo\",className:\"h-16 w-auto\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 justify-self-end\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:loadDashboardData,className:\"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:hover:text-gray-200 dark:hover:bg-gray-800 rounded-md\",title:\"Daten aktualisieren\",children:/*#__PURE__*/_jsx(RotateCcw,{className:\"w-5 h-5\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative flex items-center\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowProfile(!showProfile),className:\"flex items-center space-x-2 p-2 text-gray-700 hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-gray-800 rounded-md\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-yellow-400 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(User,{className:\"w-4 h-4 text-gray-900\"})})}),/*#__PURE__*/_jsx(\"button\",{onClick:toggle,className:\"ml-1 p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-600 dark:text-gray-300\",title:isDark?'Hellmodus':'Dunkelmodus',children:isDark?/*#__PURE__*/_jsx(Sun,{className:\"w-5 h-5\"}):/*#__PURE__*/_jsx(Moon,{className:\"w-5 h-5\"})}),showProfile&&/*#__PURE__*/_jsxs(\"div\",{className:\"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-900 rounded-md shadow-lg border border-gray-200 dark:border-gray-700 z-10\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 border-b border-gray-100 dark:border-gray-800\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm font-medium text-gray-900 dark:text-gray-100\",children:[userInfo===null||userInfo===void 0?void 0:userInfo.vorname,\" \",userInfo===null||userInfo===void 0?void 0:userInfo.name]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 dark:text-gray-400\",children:userInfo===null||userInfo===void 0?void 0:userInfo.email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"py-1\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setShowProfile(false);setShowProfileModal(true);},className:\"flex items-center w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-gray-800\",children:[/*#__PURE__*/_jsx(Edit3,{className:\"w-4 h-4 mr-2\"}),\"Profil anzeigen\"]}),/*#__PURE__*/_jsx(\"hr\",{className:\"my-1 border-gray-100 dark:border-gray-800\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onLogout,className:\"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-gray-800\",children:\"Abmelden\"})]})]})]})]})]}),/*#__PURE__*/_jsx(\"main\",{className:\"flex-1 p-6 overflow-auto bg-gray-50 dark:bg-gray-900\",children:renderContent()})]})]});}","map":{"version":3,"names":["React","useState","useEffect","User","Clock","Settings","RotateCcw","Calculator","TrendingUp","Network","ChevronRight","Sun","Moon","X","Save","Eye","EyeOff","Edit3","OnboardingSection","CalculationSection","useDarkMode","jsx","_jsx","jsxs","_jsxs","Dashboard","_ref","_menuItems$find","onLogout","userInfo","activeSection","setActiveSection","showProfile","setShowProfile","showProfileModal","setShowProfileModal","loading","setLoading","currentOnboardingStep","setCurrentOnboardingStep","isDark","toggle","passwordData","setPasswordData","currentPassword","newPassword","confirmPassword","showCurrentPassword","showNewPassword","showConfirmPassword","API_BASE","euro","n","Intl","NumberFormat","style","currency","format","Number","getJson","res","ok","Error","status","statusText","json","stats","setStats","activeCustomers","monthlyHours","monthlyRevenue","customers","setCustomers","kalkulationen","setKalkulationen","calculationForm","setCalculationForm","kunde_id","stundensatz","dienstleistungen","mwst","setMwst","onboardingCustomerData","setOnboardingCustomerData","firmenname","strasse","hausnummer","ort","plz","telefonnummer","email","ansprechpartner","name","vorname","position","infrastructureData","setInfrastructureData","netzwerk","internetzugangsart","feste_ip_vorhanden","vpn_einwahl_erforderlich","aktuelle_vpn_user","geplante_vpn_user","firewall_modell","ip_adresse","informationen","hardware","typ","hersteller","modell","seriennummer","standort","ip","details_jsonb","mail","anbieter","anzahl_postfach","anzahl_shared","gesamt_speicher","pop3_connector","mobiler_zugriff","software","licenses","critical","requirements","description","verwendete_applikationen_text","verwendete_applikationen","backup","tool","interval","retention","location","size","info","sonstiges","text","loadDashboardData","testRes","fetch","statsRes","customersRes","kalkulationenRes","Promise","all","statsData","customersData","kalkulationenData","mappedStats","Array","isArray","length","avg_zeit","total_umsatz","error","console","warn","kunden_id","kalkulations_id","kunde_name","datum","Date","toISOString","gesamtzeit","gesamtpreis","changePassword","alert","resolve","setTimeout","handleFinalOnboardingSubmit","_customerResult$kunde","customerResponse","method","headers","body","JSON","stringify","errorData","customerResult","kundeId","kunde","onboardingResponse","infrastructure_data","message","handleCalculationSubmit","e","preventDefault","payload","undefined","map","d","_d$section","beschreibung","section","anzahl","dauer_pro_einheit","trim","response","data","menuItems","id","label","icon","color","renderProfileModal","className","children","onClick","type","value","onChange","target","placeholder","disabled","renderContent","onFinalSubmit","onSubmit","bg","Math","round","item","index","header","slice","kalkulation","toLocaleDateString","IconComponent","isActive","find","src","alt","title"],"sources":["C:/Users/Ashraf/projekt-pauly/client/src/pages/dashboard.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport {\r\n  User, Clock, Settings, RotateCcw, Calculator, TrendingUp, Network, ChevronRight,\r\n  Sun, Moon, X, Save, Eye, EyeOff, Edit3\r\n} from 'lucide-react';\r\nimport OnboardingSection from '../features/onboarding/OnboardingSection.jsx';\r\nimport CalculationSection from '../features/kalkulation/calculationSection.jsx';\r\nimport useDarkMode from '../hooks/useDarkMode';\r\n\r\nexport default function Dashboard({ onLogout, userInfo }) {\r\n  const [activeSection, setActiveSection] = useState('overview');\r\n  const [showProfile, setShowProfile] = useState(false);\r\n  const [showProfileModal, setShowProfileModal] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [currentOnboardingStep, setCurrentOnboardingStep] = useState(1);\r\n  const { isDark, toggle } = useDarkMode();\r\n\r\n  // Passwort ändern States\r\n  const [passwordData, setPasswordData] = useState({\r\n    currentPassword: '',\r\n    newPassword: '',\r\n    confirmPassword: '',\r\n    showCurrentPassword: false,\r\n    showNewPassword: false,\r\n    showConfirmPassword: false,\r\n  });\r\n\r\n  // API_BASE vereinfacht - verwendet Proxy\r\n  const API_BASE = '/api';\r\n\r\n  const euro = (n) =>\r\n    new Intl.NumberFormat('de-DE', { style: 'currency', currency: 'EUR' }).format(Number(n || 0));\r\n\r\n  // Vereinfachte getJson Funktion\r\n  const getJson = async (res) => {\r\n    if (!res.ok) {\r\n      throw new Error(`HTTP ${res.status}: ${res.statusText}`);\r\n    }\r\n    return res.json();\r\n  };\r\n\r\n  // Daten-States (Projekte entfernt)\r\n  const [stats, setStats] = useState({\r\n    activeCustomers: 0,\r\n    monthlyHours: 0,\r\n    monthlyRevenue: 0,\r\n  });\r\n  const [customers, setCustomers] = useState([]);\r\n  const [kalkulationen, setKalkulationen] = useState([]);\r\n  const [calculationForm, setCalculationForm] = useState({\r\n    kunde_id: '',\r\n    stundensatz: 85,\r\n    dienstleistungen: [],\r\n  });\r\n  const [mwst, setMwst] = useState(19);\r\n\r\n  // Onboarding-States\r\n  const [onboardingCustomerData, setOnboardingCustomerData] = useState({\r\n    firmenname: '',\r\n    strasse: '',\r\n    hausnummer: '',\r\n    ort: '',\r\n    plz: '',\r\n    telefonnummer: '',\r\n    email: '',\r\n    ansprechpartner: { name: '', vorname: '', email: '', telefonnummer: '', position: '' },\r\n  });\r\n\r\n  const [infrastructureData, setInfrastructureData] = useState({\r\n    netzwerk: {\r\n      internetzugangsart: '',\r\n      feste_ip_vorhanden: false,\r\n      vpn_einwahl_erforderlich: false,\r\n      aktuelle_vpn_user: '',\r\n      geplante_vpn_user: '',\r\n      firewall_modell: '',\r\n      ip_adresse: '',\r\n      informationen: '',\r\n    },\r\n    hardware: {\r\n      typ: '',\r\n      hersteller: '',\r\n      modell: '',\r\n      seriennummer: '',\r\n      standort: '',\r\n      ip: '',\r\n      details_jsonb: {}, // JSON-Objekt\r\n      informationen: '',\r\n    },\r\n    mail: {\r\n      anbieter: '',\r\n      anzahl_postfach: '',\r\n      anzahl_shared: '',\r\n      gesamt_speicher: '',\r\n      pop3_connector: false,\r\n      mobiler_zugriff: false,\r\n      informationen: '',\r\n    },\r\n    software: {\r\n      name: '',\r\n      licenses: '',\r\n      critical: '',\r\n      requirements: [],\r\n      description: '',\r\n      verwendete_applikationen_text: '',\r\n      verwendete_applikationen: [],\r\n    },\r\n    backup: {\r\n      tool: '',\r\n      interval: '',\r\n      retention: '',\r\n      location: '',\r\n      size: '',\r\n      info: '',\r\n    },\r\n    sonstiges: {\r\n      text: '',\r\n    },\r\n  });\r\n\r\n  useEffect(() => {\r\n    loadDashboardData();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  const loadDashboardData = async () => {\r\n    try {\r\n      setLoading(true);\r\n      \r\n      // Teste zuerst die Verbindung\r\n      const testRes = await fetch(`${API_BASE}/test`);\r\n      if (!testRes.ok) throw new Error('Backend nicht erreichbar');\r\n\r\n      const [statsRes, customersRes, kalkulationenRes] = await Promise.all([\r\n        fetch(`${API_BASE}/kalkulationen/stats`),\r\n        fetch(`${API_BASE}/customers`),\r\n        fetch(`${API_BASE}/kalkulationen`),\r\n      ]);\r\n\r\n      // Check if responses are ok\r\n      if (!statsRes.ok) throw new Error('Stats endpoint failed');\r\n      if (!customersRes.ok) throw new Error('Customers endpoint failed');\r\n      if (!kalkulationenRes.ok) throw new Error('Kalkulationen endpoint failed');\r\n\r\n      const [statsData, customersData, kalkulationenData] = await Promise.all([\r\n        statsRes.json(),\r\n        customersRes.json(),\r\n        kalkulationenRes.json(),\r\n      ]);\r\n\r\n      const mappedStats = {\r\n        activeCustomers: Array.isArray(customersData) ? customersData.length : 0,\r\n        monthlyHours: Number(statsData?.monthlyHours || statsData?.avg_zeit || 0),\r\n        monthlyRevenue: Number(statsData?.monthlyRevenue || statsData?.total_umsatz || 0),\r\n      };\r\n\r\n      setStats(mappedStats);\r\n      setCustomers(customersData ?? []);\r\n      setKalkulationen(kalkulationenData ?? []);\r\n      \r\n    } catch (error) {\r\n      console.warn('Fallback auf Mock-Daten:', error);\r\n      // Setze sinnvolle Mock-Daten als Fallback\r\n      setStats({\r\n        activeCustomers: 12,\r\n        monthlyHours: 85,\r\n        monthlyRevenue: 7225,\r\n      });\r\n      setCustomers([{\r\n        kunden_id: 1,\r\n        firmenname: 'Beispielkunde GmbH',\r\n        email: 'info@beispiel.de',\r\n        strasse: 'Musterstraße',\r\n        hausnummer: '123',\r\n        ort: 'Musterstadt',\r\n        plz: '12345',\r\n        telefonnummer: '0123456789'\r\n      }]);\r\n      setKalkulationen([{\r\n        kalkulations_id: 1,\r\n        kunde_name: 'Beispielkunde GmbH',\r\n        datum: new Date().toISOString(),\r\n        gesamtzeit: 8,\r\n        gesamtpreis: 680,\r\n        status: 'neu',\r\n        stundensatz: 85\r\n      }]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const changePassword = async () => {\r\n    if (passwordData.newPassword !== passwordData.confirmPassword) {\r\n      alert('❌ Die neuen Passwörter stimmen nicht überein');\r\n      return;\r\n    }\r\n    if (passwordData.newPassword.length < 6) {\r\n      alert('❌ Das neue Passwort muss mindestens 6 Zeichen lang sein');\r\n      return;\r\n    }\r\n    try {\r\n      setLoading(true);\r\n      await new Promise((resolve) => setTimeout(resolve, 1000));\r\n      alert('✅ Passwort erfolgreich geändert!');\r\n      setPasswordData({\r\n        currentPassword: '',\r\n        newPassword: '',\r\n        confirmPassword: '',\r\n        showCurrentPassword: false,\r\n        showNewPassword: false,\r\n        showConfirmPassword: false,\r\n      });\r\n    } catch (error) {\r\n      console.error('Fehler beim Ändern des Passworts:', error);\r\n      alert('❌ Fehler beim Ändern des Passworts');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleFinalOnboardingSubmit = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const customerResponse = await fetch(`${API_BASE}/customers`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(onboardingCustomerData),\r\n      });\r\n      \r\n      if (!customerResponse.ok) {\r\n        const errorData = await customerResponse.text();\r\n        throw new Error(`Fehler beim Erstellen des Kunden: ${errorData}`);\r\n      }\r\n      \r\n      const customerResult = await customerResponse.json();\r\n      const kundeId = customerResult.kunde?.kunden_id || customerResult.kunden_id;\r\n\r\n      const onboardingResponse = await fetch(`${API_BASE}/onboarding`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ \r\n          kunde_id: kundeId, \r\n          infrastructure_data: infrastructureData \r\n        }),\r\n      });\r\n      \r\n      if (!onboardingResponse.ok) {\r\n        const errorData = await onboardingResponse.text();\r\n        throw new Error(`Fehler beim Erstellen des Onboardings: ${errorData}`);\r\n      }\r\n\r\n      alert('✅ Kunde und IT-Infrastruktur erfolgreich erfasst!');\r\n      setCurrentOnboardingStep(1);\r\n      setOnboardingCustomerData({\r\n        firmenname: '',\r\n        strasse: '',\r\n        hausnummer: '',\r\n        ort: '',\r\n        plz: '',\r\n        telefonnummer: '',\r\n        email: '',\r\n        ansprechpartner: { name: '', vorname: '', email: '', telefonnummer: '', position: '' },\r\n      });\r\n      setInfrastructureData({\r\n        netzwerk: {\r\n          internetzugangsart: '',\r\n          feste_ip_vorhanden: false,\r\n          vpn_einwahl_erforderlich: false,\r\n          aktuelle_vpn_user: '',\r\n          geplante_vpn_user: '',\r\n          firewall_modell: '',\r\n          ip_adresse: '',\r\n          informationen: '',\r\n        },\r\n        hardware: {\r\n          typ: '',\r\n          hersteller: '',\r\n          modell: '',\r\n          seriennummer: '',\r\n          standort: '',\r\n          ip: '',\r\n          details_jsonb: {},\r\n          informationen: '',\r\n        },\r\n        mail: {\r\n          anbieter: '',\r\n          anzahl_postfach: '',\r\n          anzahl_shared: '',\r\n          gesamt_speicher: '',\r\n          pop3_connector: false,\r\n          mobiler_zugriff: false,\r\n          informationen: '',\r\n        },\r\n        software: {\r\n          name: '',\r\n          licenses: '',\r\n          critical: '',\r\n          requirements: [],\r\n          description: '',\r\n          verwendete_applikationen_text: '',\r\n          verwendete_applikationen: [],\r\n        },\r\n        backup: {\r\n          tool: '',\r\n          interval: '',\r\n          retention: '',\r\n          location: '',\r\n          size: '',\r\n          info: '',\r\n        },\r\n        sonstiges: {\r\n          text: '',\r\n        },\r\n      });\r\n      loadDashboardData();\r\n    } catch (error) {\r\n      console.error('Error:', error);\r\n      alert('❌ Fehler beim Speichern: ' + error.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleCalculationSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!calculationForm.kunde_id) {\r\n      alert('Bitte einen Kunden auswählen.');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      const payload = {\r\n        kunde_id: calculationForm.kunde_id,\r\n        stundensatz: calculationForm.stundensatz === '' || calculationForm.stundensatz === undefined\r\n          ? null\r\n          : Number(calculationForm.stundensatz) || 0,\r\n        mwst: Number(mwst) || 0,\r\n        dienstleistungen: (calculationForm.dienstleistungen || []).map((d) => ({\r\n          beschreibung: d.beschreibung,\r\n          section: d.section ?? null,\r\n          anzahl: Number(d.anzahl) || 0,\r\n          dauer_pro_einheit: Number(d.dauer_pro_einheit) || 0,\r\n          info: (d.info || '').trim() || null,\r\n          stundensatz: d.stundensatz === undefined || d.stundensatz === ''\r\n            ? null\r\n            : Number(d.stundensatz) || 0,\r\n        })),\r\n      };\r\n\r\n      const response = await fetch(`${API_BASE}/kalkulationen`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(payload),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.text();\r\n        throw new Error(errorData || 'Unbekannter Fehler');\r\n      }\r\n\r\n      const data = await response.json();\r\n      alert('✅ Kalkulation wurde erfolgreich erstellt!');\r\n      \r\n      setCalculationForm({\r\n        kunde_id: '',\r\n        stundensatz: 85,\r\n        dienstleistungen: [],\r\n      });\r\n      await loadDashboardData();\r\n    } catch (error) {\r\n      console.error('Error creating calculation:', error);\r\n      alert('❌ Fehler beim Erstellen der Kalkulation: ' + error.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const menuItems = [\r\n    { id: 'overview', label: 'Übersicht', icon: TrendingUp, color: 'text-blue-600 dark:text-blue-400' },\r\n    { id: 'onboarding', label: 'Kunden-Onboarding', icon: Network, color: 'text-purple-600 dark:text-purple-400' },\r\n    { id: 'stundenkalkulation', label: 'Stundenkalkulation', icon: Calculator, color: 'text-orange-600 dark:text-orange-400' },\r\n  ];\r\n\r\n  // ... rest of the code remains the same (renderProfileModal, renderContent, return statement) ...\r\n  // Der restliche Code bleibt unverändert\r\n\r\n  const renderProfileModal = () => (\r\n    <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50\">\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 w-full max-w-md mx-4\">\r\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700\">\r\n          <h2 className=\"text-lg font-semibold text-gray-900 dark:text-gray-100\">Profil anzeigen</h2>\r\n          <button\r\n            onClick={() => setShowProfileModal(false)}\r\n            className=\"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300\"\r\n          >\r\n            <X className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"p-6 space-y-4\">\r\n          <div className=\"flex justify-center mb-6\">\r\n            <div className=\"w-20 h-20 bg-yellow-400 rounded-full flex items-center justify-center\">\r\n              <User className=\"w-10 h-10 text-gray-900\" />\r\n            </div>\r\n          </div>\r\n\r\n          {/* E-Mail anzeigen (nicht editierbar) */}\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n              Angemeldet als\r\n            </label>\r\n            <div className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-gray-100 dark:bg-gray-600 text-gray-700 dark:text-gray-300\">\r\n              {userInfo?.email || 'Nicht verfügbar'}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"border-t border-gray-200 dark:border-gray-700 pt-4 mt-6\">\r\n            <h3 className=\"text-sm font-medium text-gray-900 dark:text-gray-100 mb-3\">Passwort ändern</h3>\r\n\r\n            <div className=\"space-y-3\">\r\n              <div className=\"relative\">\r\n                <input\r\n                  type={passwordData.showCurrentPassword ? 'text' : 'password'}\r\n                  value={passwordData.currentPassword}\r\n                  onChange={(e) => setPasswordData({ ...passwordData, currentPassword: e.target.value })}\r\n                  placeholder=\"Aktuelles Passwort\"\r\n                  className=\"w-full px-3 py-2 pr-10 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100\"\r\n                />\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() =>\r\n                    setPasswordData({ ...passwordData, showCurrentPassword: !passwordData.showCurrentPassword })\r\n                  }\r\n                  className=\"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600\"\r\n                >\r\n                  {passwordData.showCurrentPassword ? <EyeOff className=\"w-4 h-4\" /> : <Eye className=\"w-4 h-4\" />}\r\n                </button>\r\n              </div>\r\n\r\n              <div className=\"relative\">\r\n                <input\r\n                  type={passwordData.showNewPassword ? 'text' : 'password'}\r\n                  value={passwordData.newPassword}\r\n                  onChange={(e) => setPasswordData({ ...passwordData, newPassword: e.target.value })}\r\n                  placeholder=\"Neues Passwort\"\r\n                  className=\"w-full px-3 py-2 pr-10 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100\"\r\n                />\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() =>\r\n                    setPasswordData({ ...passwordData, showNewPassword: !passwordData.showNewPassword })\r\n                  }\r\n                  className=\"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600\"\r\n                >\r\n                  {passwordData.showNewPassword ? <EyeOff className=\"w-4 h-4\" /> : <Eye className=\"w-4 h-4\" />}\r\n                </button>\r\n              </div>\r\n\r\n              <div className=\"relative\">\r\n                <input\r\n                  type={passwordData.showConfirmPassword ? 'text' : 'password'}\r\n                  value={passwordData.confirmPassword}\r\n                  onChange={(e) => setPasswordData({ ...passwordData, confirmPassword: e.target.value })}\r\n                  placeholder=\"Neues Passwort bestätigen\"\r\n                  className=\"w-full px-3 py-2 pr-10 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100\"\r\n                />\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() =>\r\n                    setPasswordData({\r\n                      ...passwordData,\r\n                      showConfirmPassword: !passwordData.showConfirmPassword,\r\n                    })\r\n                  }\r\n                  className=\"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600\"\r\n                >\r\n                  {passwordData.showConfirmPassword ? <EyeOff className=\"w-4 h-4\" /> : <Eye className=\"w-4 h-4\" />}\r\n                </button>\r\n              </div>\r\n\r\n              {passwordData.currentPassword &&\r\n                passwordData.newPassword &&\r\n                passwordData.confirmPassword && (\r\n                  <button\r\n                    onClick={changePassword}\r\n                    disabled={loading}\r\n                    className=\"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 transition-colors flex items-center justify-center space-x-2\"\r\n                  >\r\n                    <Save className=\"w-4 h-4\" />\r\n                    <span>Passwort ändern</span>\r\n                  </button>\r\n                )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex justify-end p-6 border-t border-gray-200 dark:border-gray-700\">\r\n          <button\r\n            onClick={() => setShowProfileModal(false)}\r\n            className=\"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors\"\r\n          >\r\n            Schließen\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  const renderContent = () => {\r\n    switch (activeSection) {\r\n      case 'onboarding':\r\n        return (\r\n          <div className={isDark ? 'dark' : ''}>\r\n            <OnboardingSection\r\n              isDark={isDark}\r\n              currentOnboardingStep={currentOnboardingStep}\r\n              setCurrentOnboardingStep={setCurrentOnboardingStep}\r\n              onboardingCustomerData={onboardingCustomerData}\r\n              setOnboardingCustomerData={setOnboardingCustomerData}\r\n              infrastructureData={infrastructureData}\r\n              setInfrastructureData={setInfrastructureData}\r\n              loading={loading}\r\n              onFinalSubmit={handleFinalOnboardingSubmit}\r\n            />\r\n          </div>\r\n        );\r\n\r\n      case 'stundenkalkulation':\r\n        return (\r\n          <div className={isDark ? 'dark' : ''}>\r\n            <CalculationSection\r\n              isDark={isDark}\r\n              customers={customers}\r\n              calculationForm={calculationForm}\r\n              setCalculationForm={setCalculationForm}\r\n              mwst={mwst}\r\n              setMwst={setMwst}\r\n              loading={loading}\r\n              onSubmit={handleCalculationSubmit}\r\n            />\r\n          </div>\r\n        );\r\n\r\n      default:\r\n        return (\r\n          <div className=\"space-y-6\">\r\n            <div>\r\n              <h2 className=\"text-2xl font-semibold text-gray-900 dark:text-gray-100 mb-2\">\r\n                Dashboard Übersicht\r\n              </h2>\r\n              <p className=\"text-gray-600 dark:text-gray-400\">\r\n                Aktuelle Statistiken und Kalkulationen\r\n              </p>\r\n            </div>\r\n\r\n            {/* Projekte-Kachel entfernt (nur 3 Kacheln) */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n              {[\r\n                { icon: User, bg: 'bg-blue-500', label: 'Kunden', value: stats.activeCustomers },\r\n                {\r\n                  icon: Clock,\r\n                  bg: 'bg-orange-500',\r\n                  label: 'Stunden (Ø/Monat)',\r\n                  value: Math.round(stats.monthlyHours) + 'h',\r\n                },\r\n                { icon: TrendingUp, bg: 'bg-purple-500', label: 'Umsatz (Monat)', value: euro(stats.monthlyRevenue) },\r\n              ].map((item, index) => (\r\n                <div\r\n                  key={index}\r\n                  className=\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700\"\r\n                >\r\n                  <div className=\"flex items-center\">\r\n                    <div className=\"flex-shrink-0\">\r\n                      <div className={`w-8 h-8 ${item.bg} rounded-md flex items-center justify-center`}>\r\n                        <item.icon className=\"w-4 h-4 text-white\" />\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"ml-4\">\r\n                      <p className=\"text-sm font-medium text-gray-600 dark:text-gray-300\">{item.label}</p>\r\n                      <p className=\"text-2xl font-semibold text-gray-900 dark:text-gray-100\">{item.value}</p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n\r\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700\">\r\n              <div className=\"px-6 py-4 border-b border-gray-200 dark:border-gray-700\">\r\n                <h3 className=\"text-lg font-medium text-gray-900 dark:text-gray-100\">Aktuelle Kalkulationen</h3>\r\n              </div>\r\n\r\n              <div className=\"overflow-x-auto\">\r\n                <table className=\"w-full\">\r\n                  <thead className=\"bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600\">\r\n                    <tr>\r\n                      {['Kunde', 'Datum', 'Stunden', 'Gesamtpreis', 'Status'].map((header) => (\r\n                        <th\r\n                          key={header}\r\n                          className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\"\r\n                        >\r\n                          {header}\r\n                        </th>\r\n                      ))}\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody className=\"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700\">\r\n                    {kalkulationen.slice(0, 5).map((kalkulation) => (\r\n                      <tr key={kalkulation.kalkulations_id} className=\"hover:bg-gray-50 dark:hover:bg-gray-700\">\r\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                          <span className=\"text-sm font-medium text-gray-900 dark:text-gray-100\">\r\n                            {kalkulation.kunde_name || kalkulation.firmenname || '—'}\r\n                          </span>\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                          <span className=\"text-sm text-gray-900 dark:text-gray-300\">\r\n                            {kalkulation.datum ? new Date(kalkulation.datum).toLocaleDateString('de-DE') : '—'}\r\n                          </span>\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                          <span className=\"text-sm text-gray-900 dark:text-gray-300\">\r\n                            {Number(kalkulation.gesamtzeit || 0)}h\r\n                          </span>\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                          <span className=\"text-sm text-gray-900 dark:text-gray-300\">\r\n                            {euro(kalkulation.gesamtpreis)}\r\n                          </span>\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                          <span\r\n                            className={`inline-flex px-2 py-1 text-xs font-medium rounded-full ${\r\n                              kalkulation.status === 'erledigt'\r\n                                ? 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200'\r\n                                : kalkulation.status === 'in Arbeit'\r\n                                ? 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200'\r\n                                : 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200'\r\n                            }`}\r\n                          >\r\n                            {kalkulation.status || 'neu'}\r\n                          </span>\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={`h-screen flex bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 ${isDark ? 'dark' : ''}`}>\r\n      {loading && (\r\n        <div className=\"fixed inset-0 bg-black/10 dark:bg-black/30 backdrop-blur-sm flex items-center justify-center z-50\">\r\n          <div className=\"bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 px-4 py-2 rounded shadow\">\r\n            Lade Daten…\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Profil Modal */}\r\n      {showProfileModal && renderProfileModal()}\r\n\r\n      {/* Sidebar */}\r\n      <div className=\"w-64 bg-white dark:bg-gray-950 border-r border-gray-200 dark:border-gray-800 flex flex-col\">\r\n        <div className=\"p-4 border-b border-gray-200 dark:border-gray-800\">\r\n          <h1 className=\"text-xl font-bold text-gray-800 dark:text-gray-100\">Pauly Dashboard</h1>\r\n        </div>\r\n\r\n        <nav className=\"flex-1 p-4 space-y-2\">\r\n          <div className=\"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3\">\r\n            BEREICHE\r\n          </div>\r\n\r\n          {menuItems.map((item) => {\r\n            const IconComponent = item.icon;\r\n            const isActive = activeSection === item.id;\r\n            return (\r\n              <button\r\n                key={item.id}\r\n                onClick={() => setActiveSection(item.id)}\r\n                className={`w-full flex items-center space-x-3 px-3 py-2 rounded-md text-sm font-medium transition-colors ${\r\n                  isActive\r\n                    ? 'bg-blue-50 text-blue-700 border-l-4 border-blue-600 dark:bg-blue-900/30 dark:text-blue-300 dark:border-blue-400'\r\n                    : 'text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-800'\r\n                }`}\r\n              >\r\n                <IconComponent\r\n                  className={`w-4 h-4 ${\r\n                    isActive ? 'text-blue-600 dark:text-blue-400' : 'text-gray-500 dark:text-gray-400'\r\n                  }`}\r\n                />\r\n                <span className=\"flex-1 text-left\">{item.label}</span>\r\n                {isActive && <ChevronRight className=\"w-4 h-4 text-blue-600 dark:text-blue-400\" />}\r\n              </button>\r\n            );\r\n          })}\r\n        </nav>\r\n\r\n        <div className=\"p-4 border-t border-gray-200 dark:border-gray-800\"></div>\r\n      </div>\r\n\r\n      {/* Main */}\r\n      <div className=\"flex-1 flex flex-col\">\r\n        <header className=\"bg-white dark:bg-gray-950 border-b border-gray-200 dark:border-gray-800 px-6 py-3 grid grid-cols-[1fr_auto_1fr] items-center\">\r\n          <div className=\"justify-self-start\">\r\n            <h2 className=\"sr-only\">\r\n              {menuItems.find((item) => item.id === activeSection)?.label || 'Dashboard'}\r\n            </h2>\r\n          </div>\r\n\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => setActiveSection('overview')}\r\n            className=\"justify-self-center\"\r\n            aria-label=\"Zur Übersicht\"\r\n          >\r\n            <img src=\"/pauly_logo4.png\" alt=\"Pauly Logo\" className=\"h-16 w-auto\" />\r\n          </button>\r\n\r\n          <div className=\"flex items-center space-x-3 justify-self-end\">\r\n            <button\r\n              onClick={loadDashboardData}\r\n              className=\"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:hover:text-gray-200 dark:hover:bg-gray-800 rounded-md\"\r\n              title=\"Daten aktualisieren\"\r\n            >\r\n              <RotateCcw className=\"w-5 h-5\" />\r\n            </button>\r\n\r\n            <div className=\"relative flex items-center\">\r\n              <button\r\n                onClick={() => setShowProfile(!showProfile)}\r\n                className=\"flex items-center space-x-2 p-2 text-gray-700 hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-gray-800 rounded-md\"\r\n              >\r\n                <div className=\"w-8 h-8 bg-yellow-400 rounded-full flex items-center justify-center\">\r\n                  <User className=\"w-4 h-4 text-gray-900\" />\r\n                </div>\r\n              </button>\r\n\r\n              <button\r\n                onClick={toggle}\r\n                className=\"ml-1 p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-600 dark:text-gray-300\"\r\n                title={isDark ? 'Hellmodus' : 'Dunkelmodus'}\r\n              >\r\n                {isDark ? <Sun className=\"w-5 h-5\" /> : <Moon className=\"w-5 h-5\" />}\r\n              </button>\r\n\r\n              {showProfile && (\r\n                <div className=\"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-900 rounded-md shadow-lg border border-gray-200 dark:border-gray-700 z-10\">\r\n                  <div className=\"p-3 border-b border-gray-100 dark:border-gray-800\">\r\n                    <p className=\"text-sm font-medium text-gray-900 dark:text-gray-100\">\r\n                      {userInfo?.vorname} {userInfo?.name}\r\n                    </p>\r\n                    <p className=\"text-xs text-gray-500 dark:text-gray-400\">{userInfo?.email}</p>\r\n                  </div>\r\n                  <div className=\"py-1\">\r\n                    <button\r\n                      onClick={() => {\r\n                        setShowProfile(false);\r\n                        setShowProfileModal(true);\r\n                      }}\r\n                      className=\"flex items-center w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-gray-800\"\r\n                    >\r\n                      <Edit3 className=\"w-4 h-4 mr-2\" />\r\n                      Profil anzeigen\r\n                    </button>\r\n                    <hr className=\"my-1 border-gray-100 dark:border-gray-800\" />\r\n                    <button\r\n                      onClick={onLogout}\r\n                      className=\"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-gray-800\"\r\n                    >\r\n                      Abmelden\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </header>\r\n\r\n        <main className=\"flex-1 p-6 overflow-auto bg-gray-50 dark:bg-gray-900\">\r\n          {renderContent()}\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OACEC,IAAI,CAAEC,KAAK,CAAEC,QAAQ,CAAEC,SAAS,CAAEC,UAAU,CAAEC,UAAU,CAAEC,OAAO,CAAEC,YAAY,CAC/EC,GAAG,CAAEC,IAAI,CAAEC,CAAC,CAAEC,IAAI,CAAEC,GAAG,CAAEC,MAAM,CAAEC,KAAK,KACjC,cAAc,CACrB,MAAO,CAAAC,iBAAiB,KAAM,8CAA8C,CAC5E,MAAO,CAAAC,kBAAkB,KAAM,gDAAgD,CAC/E,MAAO,CAAAC,WAAW,KAAM,sBAAsB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE/C,cAAe,SAAS,CAAAC,SAASA,CAAAC,IAAA,CAAyB,KAAAC,eAAA,IAAxB,CAAEC,QAAQ,CAAEC,QAAS,CAAC,CAAAH,IAAA,CACtD,KAAM,CAACI,aAAa,CAAEC,gBAAgB,CAAC,CAAG9B,QAAQ,CAAC,UAAU,CAAC,CAC9D,KAAM,CAAC+B,WAAW,CAAEC,cAAc,CAAC,CAAGhC,QAAQ,CAAC,KAAK,CAAC,CACrD,KAAM,CAACiC,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGlC,QAAQ,CAAC,KAAK,CAAC,CAC/D,KAAM,CAACmC,OAAO,CAAEC,UAAU,CAAC,CAAGpC,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAACqC,qBAAqB,CAAEC,wBAAwB,CAAC,CAAGtC,QAAQ,CAAC,CAAC,CAAC,CACrE,KAAM,CAAEuC,MAAM,CAAEC,MAAO,CAAC,CAAGrB,WAAW,CAAC,CAAC,CAExC;AACA,KAAM,CAACsB,YAAY,CAAEC,eAAe,CAAC,CAAG1C,QAAQ,CAAC,CAC/C2C,eAAe,CAAE,EAAE,CACnBC,WAAW,CAAE,EAAE,CACfC,eAAe,CAAE,EAAE,CACnBC,mBAAmB,CAAE,KAAK,CAC1BC,eAAe,CAAE,KAAK,CACtBC,mBAAmB,CAAE,KACvB,CAAC,CAAC,CAEF;AACA,KAAM,CAAAC,QAAQ,CAAG,MAAM,CAEvB,KAAM,CAAAC,IAAI,CAAIC,CAAC,EACb,GAAI,CAAAC,IAAI,CAACC,YAAY,CAAC,OAAO,CAAE,CAAEC,KAAK,CAAE,UAAU,CAAEC,QAAQ,CAAE,KAAM,CAAC,CAAC,CAACC,MAAM,CAACC,MAAM,CAACN,CAAC,EAAI,CAAC,CAAC,CAAC,CAE/F;AACA,KAAM,CAAAO,OAAO,CAAG,KAAO,CAAAC,GAAG,EAAK,CAC7B,GAAI,CAACA,GAAG,CAACC,EAAE,CAAE,CACX,KAAM,IAAI,CAAAC,KAAK,CAAC,QAAQF,GAAG,CAACG,MAAM,KAAKH,GAAG,CAACI,UAAU,EAAE,CAAC,CAC1D,CACA,MAAO,CAAAJ,GAAG,CAACK,IAAI,CAAC,CAAC,CACnB,CAAC,CAED;AACA,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGlE,QAAQ,CAAC,CACjCmE,eAAe,CAAE,CAAC,CAClBC,YAAY,CAAE,CAAC,CACfC,cAAc,CAAE,CAClB,CAAC,CAAC,CACF,KAAM,CAACC,SAAS,CAAEC,YAAY,CAAC,CAAGvE,QAAQ,CAAC,EAAE,CAAC,CAC9C,KAAM,CAACwE,aAAa,CAAEC,gBAAgB,CAAC,CAAGzE,QAAQ,CAAC,EAAE,CAAC,CACtD,KAAM,CAAC0E,eAAe,CAAEC,kBAAkB,CAAC,CAAG3E,QAAQ,CAAC,CACrD4E,QAAQ,CAAE,EAAE,CACZC,WAAW,CAAE,EAAE,CACfC,gBAAgB,CAAE,EACpB,CAAC,CAAC,CACF,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGhF,QAAQ,CAAC,EAAE,CAAC,CAEpC;AACA,KAAM,CAACiF,sBAAsB,CAAEC,yBAAyB,CAAC,CAAGlF,QAAQ,CAAC,CACnEmF,UAAU,CAAE,EAAE,CACdC,OAAO,CAAE,EAAE,CACXC,UAAU,CAAE,EAAE,CACdC,GAAG,CAAE,EAAE,CACPC,GAAG,CAAE,EAAE,CACPC,aAAa,CAAE,EAAE,CACjBC,KAAK,CAAE,EAAE,CACTC,eAAe,CAAE,CAAEC,IAAI,CAAE,EAAE,CAAEC,OAAO,CAAE,EAAE,CAAEH,KAAK,CAAE,EAAE,CAAED,aAAa,CAAE,EAAE,CAAEK,QAAQ,CAAE,EAAG,CACvF,CAAC,CAAC,CAEF,KAAM,CAACC,kBAAkB,CAAEC,qBAAqB,CAAC,CAAG/F,QAAQ,CAAC,CAC3DgG,QAAQ,CAAE,CACRC,kBAAkB,CAAE,EAAE,CACtBC,kBAAkB,CAAE,KAAK,CACzBC,wBAAwB,CAAE,KAAK,CAC/BC,iBAAiB,CAAE,EAAE,CACrBC,iBAAiB,CAAE,EAAE,CACrBC,eAAe,CAAE,EAAE,CACnBC,UAAU,CAAE,EAAE,CACdC,aAAa,CAAE,EACjB,CAAC,CACDC,QAAQ,CAAE,CACRC,GAAG,CAAE,EAAE,CACPC,UAAU,CAAE,EAAE,CACdC,MAAM,CAAE,EAAE,CACVC,YAAY,CAAE,EAAE,CAChBC,QAAQ,CAAE,EAAE,CACZC,EAAE,CAAE,EAAE,CACNC,aAAa,CAAE,CAAC,CAAC,CAAE;AACnBR,aAAa,CAAE,EACjB,CAAC,CACDS,IAAI,CAAE,CACJC,QAAQ,CAAE,EAAE,CACZC,eAAe,CAAE,EAAE,CACnBC,aAAa,CAAE,EAAE,CACjBC,eAAe,CAAE,EAAE,CACnBC,cAAc,CAAE,KAAK,CACrBC,eAAe,CAAE,KAAK,CACtBf,aAAa,CAAE,EACjB,CAAC,CACDgB,QAAQ,CAAE,CACR7B,IAAI,CAAE,EAAE,CACR8B,QAAQ,CAAE,EAAE,CACZC,QAAQ,CAAE,EAAE,CACZC,YAAY,CAAE,EAAE,CAChBC,WAAW,CAAE,EAAE,CACfC,6BAA6B,CAAE,EAAE,CACjCC,wBAAwB,CAAE,EAC5B,CAAC,CACDC,MAAM,CAAE,CACNC,IAAI,CAAE,EAAE,CACRC,QAAQ,CAAE,EAAE,CACZC,SAAS,CAAE,EAAE,CACbC,QAAQ,CAAE,EAAE,CACZC,IAAI,CAAE,EAAE,CACRC,IAAI,CAAE,EACR,CAAC,CACDC,SAAS,CAAE,CACTC,IAAI,CAAE,EACR,CACF,CAAC,CAAC,CAEFtI,SAAS,CAAC,IAAM,CACduI,iBAAiB,CAAC,CAAC,CACnB;AACF,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAA,iBAAiB,CAAG,KAAAA,CAAA,GAAY,CACpC,GAAI,CACFpG,UAAU,CAAC,IAAI,CAAC,CAEhB;AACA,KAAM,CAAAqG,OAAO,CAAG,KAAM,CAAAC,KAAK,CAAC,GAAGzF,QAAQ,OAAO,CAAC,CAC/C,GAAI,CAACwF,OAAO,CAAC7E,EAAE,CAAE,KAAM,IAAI,CAAAC,KAAK,CAAC,0BAA0B,CAAC,CAE5D,KAAM,CAAC8E,QAAQ,CAAEC,YAAY,CAAEC,gBAAgB,CAAC,CAAG,KAAM,CAAAC,OAAO,CAACC,GAAG,CAAC,CACnEL,KAAK,CAAC,GAAGzF,QAAQ,sBAAsB,CAAC,CACxCyF,KAAK,CAAC,GAAGzF,QAAQ,YAAY,CAAC,CAC9ByF,KAAK,CAAC,GAAGzF,QAAQ,gBAAgB,CAAC,CACnC,CAAC,CAEF;AACA,GAAI,CAAC0F,QAAQ,CAAC/E,EAAE,CAAE,KAAM,IAAI,CAAAC,KAAK,CAAC,uBAAuB,CAAC,CAC1D,GAAI,CAAC+E,YAAY,CAAChF,EAAE,CAAE,KAAM,IAAI,CAAAC,KAAK,CAAC,2BAA2B,CAAC,CAClE,GAAI,CAACgF,gBAAgB,CAACjF,EAAE,CAAE,KAAM,IAAI,CAAAC,KAAK,CAAC,+BAA+B,CAAC,CAE1E,KAAM,CAACmF,SAAS,CAAEC,aAAa,CAAEC,iBAAiB,CAAC,CAAG,KAAM,CAAAJ,OAAO,CAACC,GAAG,CAAC,CACtEJ,QAAQ,CAAC3E,IAAI,CAAC,CAAC,CACf4E,YAAY,CAAC5E,IAAI,CAAC,CAAC,CACnB6E,gBAAgB,CAAC7E,IAAI,CAAC,CAAC,CACxB,CAAC,CAEF,KAAM,CAAAmF,WAAW,CAAG,CAClBhF,eAAe,CAAEiF,KAAK,CAACC,OAAO,CAACJ,aAAa,CAAC,CAAGA,aAAa,CAACK,MAAM,CAAG,CAAC,CACxElF,YAAY,CAAEX,MAAM,CAAC,CAAAuF,SAAS,SAATA,SAAS,iBAATA,SAAS,CAAE5E,YAAY,IAAI4E,SAAS,SAATA,SAAS,iBAATA,SAAS,CAAEO,QAAQ,GAAI,CAAC,CAAC,CACzElF,cAAc,CAAEZ,MAAM,CAAC,CAAAuF,SAAS,SAATA,SAAS,iBAATA,SAAS,CAAE3E,cAAc,IAAI2E,SAAS,SAATA,SAAS,iBAATA,SAAS,CAAEQ,YAAY,GAAI,CAAC,CAClF,CAAC,CAEDtF,QAAQ,CAACiF,WAAW,CAAC,CACrB5E,YAAY,CAAC0E,aAAa,SAAbA,aAAa,UAAbA,aAAa,CAAI,EAAE,CAAC,CACjCxE,gBAAgB,CAACyE,iBAAiB,SAAjBA,iBAAiB,UAAjBA,iBAAiB,CAAI,EAAE,CAAC,CAE3C,CAAE,MAAOO,KAAK,CAAE,CACdC,OAAO,CAACC,IAAI,CAAC,0BAA0B,CAAEF,KAAK,CAAC,CAC/C;AACAvF,QAAQ,CAAC,CACPC,eAAe,CAAE,EAAE,CACnBC,YAAY,CAAE,EAAE,CAChBC,cAAc,CAAE,IAClB,CAAC,CAAC,CACFE,YAAY,CAAC,CAAC,CACZqF,SAAS,CAAE,CAAC,CACZzE,UAAU,CAAE,oBAAoB,CAChCM,KAAK,CAAE,kBAAkB,CACzBL,OAAO,CAAE,cAAc,CACvBC,UAAU,CAAE,KAAK,CACjBC,GAAG,CAAE,aAAa,CAClBC,GAAG,CAAE,OAAO,CACZC,aAAa,CAAE,YACjB,CAAC,CAAC,CAAC,CACHf,gBAAgB,CAAC,CAAC,CAChBoF,eAAe,CAAE,CAAC,CAClBC,UAAU,CAAE,oBAAoB,CAChCC,KAAK,CAAE,GAAI,CAAAC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAC/BC,UAAU,CAAE,CAAC,CACbC,WAAW,CAAE,GAAG,CAChBrG,MAAM,CAAE,KAAK,CACbe,WAAW,CAAE,EACf,CAAC,CAAC,CAAC,CACL,CAAC,OAAS,CACRzC,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,KAAM,CAAAgI,cAAc,CAAG,KAAAA,CAAA,GAAY,CACjC,GAAI3H,YAAY,CAACG,WAAW,GAAKH,YAAY,CAACI,eAAe,CAAE,CAC7DwH,KAAK,CAAC,8CAA8C,CAAC,CACrD,OACF,CACA,GAAI5H,YAAY,CAACG,WAAW,CAAC0G,MAAM,CAAG,CAAC,CAAE,CACvCe,KAAK,CAAC,yDAAyD,CAAC,CAChE,OACF,CACA,GAAI,CACFjI,UAAU,CAAC,IAAI,CAAC,CAChB,KAAM,IAAI,CAAA0G,OAAO,CAAEwB,OAAO,EAAKC,UAAU,CAACD,OAAO,CAAE,IAAI,CAAC,CAAC,CACzDD,KAAK,CAAC,kCAAkC,CAAC,CACzC3H,eAAe,CAAC,CACdC,eAAe,CAAE,EAAE,CACnBC,WAAW,CAAE,EAAE,CACfC,eAAe,CAAE,EAAE,CACnBC,mBAAmB,CAAE,KAAK,CAC1BC,eAAe,CAAE,KAAK,CACtBC,mBAAmB,CAAE,KACvB,CAAC,CAAC,CACJ,CAAE,MAAOyG,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,mCAAmC,CAAEA,KAAK,CAAC,CACzDY,KAAK,CAAC,oCAAoC,CAAC,CAC7C,CAAC,OAAS,CACRjI,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,KAAM,CAAAoI,2BAA2B,CAAG,KAAAA,CAAA,GAAY,CAC9CpI,UAAU,CAAC,IAAI,CAAC,CAChB,GAAI,KAAAqI,qBAAA,CACF,KAAM,CAAAC,gBAAgB,CAAG,KAAM,CAAAhC,KAAK,CAAC,GAAGzF,QAAQ,YAAY,CAAE,CAC5D0H,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC/CC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC9F,sBAAsB,CAC7C,CAAC,CAAC,CAEF,GAAI,CAACyF,gBAAgB,CAAC9G,EAAE,CAAE,CACxB,KAAM,CAAAoH,SAAS,CAAG,KAAM,CAAAN,gBAAgB,CAACnC,IAAI,CAAC,CAAC,CAC/C,KAAM,IAAI,CAAA1E,KAAK,CAAC,qCAAqCmH,SAAS,EAAE,CAAC,CACnE,CAEA,KAAM,CAAAC,cAAc,CAAG,KAAM,CAAAP,gBAAgB,CAAC1G,IAAI,CAAC,CAAC,CACpD,KAAM,CAAAkH,OAAO,CAAG,EAAAT,qBAAA,CAAAQ,cAAc,CAACE,KAAK,UAAAV,qBAAA,iBAApBA,qBAAA,CAAsBb,SAAS,GAAIqB,cAAc,CAACrB,SAAS,CAE3E,KAAM,CAAAwB,kBAAkB,CAAG,KAAM,CAAA1C,KAAK,CAAC,GAAGzF,QAAQ,aAAa,CAAE,CAC/D0H,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC/CC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACnBnG,QAAQ,CAAEsG,OAAO,CACjBG,mBAAmB,CAAEvF,kBACvB,CAAC,CACH,CAAC,CAAC,CAEF,GAAI,CAACsF,kBAAkB,CAACxH,EAAE,CAAE,CAC1B,KAAM,CAAAoH,SAAS,CAAG,KAAM,CAAAI,kBAAkB,CAAC7C,IAAI,CAAC,CAAC,CACjD,KAAM,IAAI,CAAA1E,KAAK,CAAC,0CAA0CmH,SAAS,EAAE,CAAC,CACxE,CAEAX,KAAK,CAAC,mDAAmD,CAAC,CAC1D/H,wBAAwB,CAAC,CAAC,CAAC,CAC3B4C,yBAAyB,CAAC,CACxBC,UAAU,CAAE,EAAE,CACdC,OAAO,CAAE,EAAE,CACXC,UAAU,CAAE,EAAE,CACdC,GAAG,CAAE,EAAE,CACPC,GAAG,CAAE,EAAE,CACPC,aAAa,CAAE,EAAE,CACjBC,KAAK,CAAE,EAAE,CACTC,eAAe,CAAE,CAAEC,IAAI,CAAE,EAAE,CAAEC,OAAO,CAAE,EAAE,CAAEH,KAAK,CAAE,EAAE,CAAED,aAAa,CAAE,EAAE,CAAEK,QAAQ,CAAE,EAAG,CACvF,CAAC,CAAC,CACFE,qBAAqB,CAAC,CACpBC,QAAQ,CAAE,CACRC,kBAAkB,CAAE,EAAE,CACtBC,kBAAkB,CAAE,KAAK,CACzBC,wBAAwB,CAAE,KAAK,CAC/BC,iBAAiB,CAAE,EAAE,CACrBC,iBAAiB,CAAE,EAAE,CACrBC,eAAe,CAAE,EAAE,CACnBC,UAAU,CAAE,EAAE,CACdC,aAAa,CAAE,EACjB,CAAC,CACDC,QAAQ,CAAE,CACRC,GAAG,CAAE,EAAE,CACPC,UAAU,CAAE,EAAE,CACdC,MAAM,CAAE,EAAE,CACVC,YAAY,CAAE,EAAE,CAChBC,QAAQ,CAAE,EAAE,CACZC,EAAE,CAAE,EAAE,CACNC,aAAa,CAAE,CAAC,CAAC,CACjBR,aAAa,CAAE,EACjB,CAAC,CACDS,IAAI,CAAE,CACJC,QAAQ,CAAE,EAAE,CACZC,eAAe,CAAE,EAAE,CACnBC,aAAa,CAAE,EAAE,CACjBC,eAAe,CAAE,EAAE,CACnBC,cAAc,CAAE,KAAK,CACrBC,eAAe,CAAE,KAAK,CACtBf,aAAa,CAAE,EACjB,CAAC,CACDgB,QAAQ,CAAE,CACR7B,IAAI,CAAE,EAAE,CACR8B,QAAQ,CAAE,EAAE,CACZC,QAAQ,CAAE,EAAE,CACZC,YAAY,CAAE,EAAE,CAChBC,WAAW,CAAE,EAAE,CACfC,6BAA6B,CAAE,EAAE,CACjCC,wBAAwB,CAAE,EAC5B,CAAC,CACDC,MAAM,CAAE,CACNC,IAAI,CAAE,EAAE,CACRC,QAAQ,CAAE,EAAE,CACZC,SAAS,CAAE,EAAE,CACbC,QAAQ,CAAE,EAAE,CACZC,IAAI,CAAE,EAAE,CACRC,IAAI,CAAE,EACR,CAAC,CACDC,SAAS,CAAE,CACTC,IAAI,CAAE,EACR,CACF,CAAC,CAAC,CACFC,iBAAiB,CAAC,CAAC,CACrB,CAAE,MAAOiB,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,QAAQ,CAAEA,KAAK,CAAC,CAC9BY,KAAK,CAAC,2BAA2B,CAAGZ,KAAK,CAAC6B,OAAO,CAAC,CACpD,CAAC,OAAS,CACRlJ,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,KAAM,CAAAmJ,uBAAuB,CAAG,KAAO,CAAAC,CAAC,EAAK,CAC3CA,CAAC,CAACC,cAAc,CAAC,CAAC,CAElB,GAAI,CAAC/G,eAAe,CAACE,QAAQ,CAAE,CAC7ByF,KAAK,CAAC,+BAA+B,CAAC,CACtC,OACF,CAEAjI,UAAU,CAAC,IAAI,CAAC,CAChB,GAAI,CACF,KAAM,CAAAsJ,OAAO,CAAG,CACd9G,QAAQ,CAAEF,eAAe,CAACE,QAAQ,CAClCC,WAAW,CAAEH,eAAe,CAACG,WAAW,GAAK,EAAE,EAAIH,eAAe,CAACG,WAAW,GAAK8G,SAAS,CACxF,IAAI,CACJlI,MAAM,CAACiB,eAAe,CAACG,WAAW,CAAC,EAAI,CAAC,CAC5CE,IAAI,CAAEtB,MAAM,CAACsB,IAAI,CAAC,EAAI,CAAC,CACvBD,gBAAgB,CAAE,CAACJ,eAAe,CAACI,gBAAgB,EAAI,EAAE,EAAE8G,GAAG,CAAEC,CAAC,OAAAC,UAAA,OAAM,CACrEC,YAAY,CAAEF,CAAC,CAACE,YAAY,CAC5BC,OAAO,EAAAF,UAAA,CAAED,CAAC,CAACG,OAAO,UAAAF,UAAA,UAAAA,UAAA,CAAI,IAAI,CAC1BG,MAAM,CAAExI,MAAM,CAACoI,CAAC,CAACI,MAAM,CAAC,EAAI,CAAC,CAC7BC,iBAAiB,CAAEzI,MAAM,CAACoI,CAAC,CAACK,iBAAiB,CAAC,EAAI,CAAC,CACnD7D,IAAI,CAAE,CAACwD,CAAC,CAACxD,IAAI,EAAI,EAAE,EAAE8D,IAAI,CAAC,CAAC,EAAI,IAAI,CACnCtH,WAAW,CAAEgH,CAAC,CAAChH,WAAW,GAAK8G,SAAS,EAAIE,CAAC,CAAChH,WAAW,GAAK,EAAE,CAC5D,IAAI,CACJpB,MAAM,CAACoI,CAAC,CAAChH,WAAW,CAAC,EAAI,CAC/B,CAAC,EAAC,CACJ,CAAC,CAED,KAAM,CAAAuH,QAAQ,CAAG,KAAM,CAAA1D,KAAK,CAAC,GAAGzF,QAAQ,gBAAgB,CAAE,CACxD0H,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC/CC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACW,OAAO,CAC9B,CAAC,CAAC,CAEF,GAAI,CAACU,QAAQ,CAACxI,EAAE,CAAE,CAChB,KAAM,CAAAoH,SAAS,CAAG,KAAM,CAAAoB,QAAQ,CAAC7D,IAAI,CAAC,CAAC,CACvC,KAAM,IAAI,CAAA1E,KAAK,CAACmH,SAAS,EAAI,oBAAoB,CAAC,CACpD,CAEA,KAAM,CAAAqB,IAAI,CAAG,KAAM,CAAAD,QAAQ,CAACpI,IAAI,CAAC,CAAC,CAClCqG,KAAK,CAAC,2CAA2C,CAAC,CAElD1F,kBAAkB,CAAC,CACjBC,QAAQ,CAAE,EAAE,CACZC,WAAW,CAAE,EAAE,CACfC,gBAAgB,CAAE,EACpB,CAAC,CAAC,CACF,KAAM,CAAA0D,iBAAiB,CAAC,CAAC,CAC3B,CAAE,MAAOiB,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,6BAA6B,CAAEA,KAAK,CAAC,CACnDY,KAAK,CAAC,2CAA2C,CAAGZ,KAAK,CAAC6B,OAAO,CAAC,CACpE,CAAC,OAAS,CACRlJ,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,KAAM,CAAAkK,SAAS,CAAG,CAChB,CAAEC,EAAE,CAAE,UAAU,CAAEC,KAAK,CAAE,WAAW,CAAEC,IAAI,CAAElM,UAAU,CAAEmM,KAAK,CAAE,kCAAmC,CAAC,CACnG,CAAEH,EAAE,CAAE,YAAY,CAAEC,KAAK,CAAE,mBAAmB,CAAEC,IAAI,CAAEjM,OAAO,CAAEkM,KAAK,CAAE,sCAAuC,CAAC,CAC9G,CAAEH,EAAE,CAAE,oBAAoB,CAAEC,KAAK,CAAE,oBAAoB,CAAEC,IAAI,CAAEnM,UAAU,CAAEoM,KAAK,CAAE,sCAAuC,CAAC,CAC3H,CAED;AACA;AAEA,KAAM,CAAAC,kBAAkB,CAAGA,CAAA,gBACzBtL,IAAA,QAAKuL,SAAS,CAAC,kFAAkF,CAAAC,QAAA,cAC/FtL,KAAA,QAAKqL,SAAS,CAAC,iHAAiH,CAAAC,QAAA,eAC9HtL,KAAA,QAAKqL,SAAS,CAAC,qFAAqF,CAAAC,QAAA,eAClGxL,IAAA,OAAIuL,SAAS,CAAC,wDAAwD,CAAAC,QAAA,CAAC,iBAAe,CAAI,CAAC,cAC3FxL,IAAA,WACEyL,OAAO,CAAEA,CAAA,GAAM5K,mBAAmB,CAAC,KAAK,CAAE,CAC1C0K,SAAS,CAAC,4DAA4D,CAAAC,QAAA,cAEtExL,IAAA,CAACT,CAAC,EAACgM,SAAS,CAAC,SAAS,CAAE,CAAC,CACnB,CAAC,EACN,CAAC,cAENrL,KAAA,QAAKqL,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5BxL,IAAA,QAAKuL,SAAS,CAAC,0BAA0B,CAAAC,QAAA,cACvCxL,IAAA,QAAKuL,SAAS,CAAC,uEAAuE,CAAAC,QAAA,cACpFxL,IAAA,CAACnB,IAAI,EAAC0M,SAAS,CAAC,yBAAyB,CAAE,CAAC,CACzC,CAAC,CACH,CAAC,cAGNrL,KAAA,QAAAsL,QAAA,eACExL,IAAA,UAAOuL,SAAS,CAAC,iEAAiE,CAAAC,QAAA,CAAC,gBAEnF,CAAO,CAAC,cACRxL,IAAA,QAAKuL,SAAS,CAAC,uIAAuI,CAAAC,QAAA,CACnJ,CAAAjL,QAAQ,SAARA,QAAQ,iBAARA,QAAQ,CAAE6D,KAAK,GAAI,iBAAiB,CAClC,CAAC,EACH,CAAC,cAENlE,KAAA,QAAKqL,SAAS,CAAC,yDAAyD,CAAAC,QAAA,eACtExL,IAAA,OAAIuL,SAAS,CAAC,2DAA2D,CAAAC,QAAA,CAAC,oBAAe,CAAI,CAAC,cAE9FtL,KAAA,QAAKqL,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBtL,KAAA,QAAKqL,SAAS,CAAC,UAAU,CAAAC,QAAA,eACvBxL,IAAA,UACE0L,IAAI,CAAEtK,YAAY,CAACK,mBAAmB,CAAG,MAAM,CAAG,UAAW,CAC7DkK,KAAK,CAAEvK,YAAY,CAACE,eAAgB,CACpCsK,QAAQ,CAAGzB,CAAC,EAAK9I,eAAe,CAAC,CAAE,GAAGD,YAAY,CAAEE,eAAe,CAAE6I,CAAC,CAAC0B,MAAM,CAACF,KAAM,CAAC,CAAE,CACvFG,WAAW,CAAC,oBAAoB,CAChCP,SAAS,CAAC,8LAA8L,CACzM,CAAC,cACFvL,IAAA,WACE0L,IAAI,CAAC,QAAQ,CACbD,OAAO,CAAEA,CAAA,GACPpK,eAAe,CAAC,CAAE,GAAGD,YAAY,CAAEK,mBAAmB,CAAE,CAACL,YAAY,CAACK,mBAAoB,CAAC,CAC5F,CACD8J,SAAS,CAAC,6EAA6E,CAAAC,QAAA,CAEtFpK,YAAY,CAACK,mBAAmB,cAAGzB,IAAA,CAACN,MAAM,EAAC6L,SAAS,CAAC,SAAS,CAAE,CAAC,cAAGvL,IAAA,CAACP,GAAG,EAAC8L,SAAS,CAAC,SAAS,CAAE,CAAC,CAC1F,CAAC,EACN,CAAC,cAENrL,KAAA,QAAKqL,SAAS,CAAC,UAAU,CAAAC,QAAA,eACvBxL,IAAA,UACE0L,IAAI,CAAEtK,YAAY,CAACM,eAAe,CAAG,MAAM,CAAG,UAAW,CACzDiK,KAAK,CAAEvK,YAAY,CAACG,WAAY,CAChCqK,QAAQ,CAAGzB,CAAC,EAAK9I,eAAe,CAAC,CAAE,GAAGD,YAAY,CAAEG,WAAW,CAAE4I,CAAC,CAAC0B,MAAM,CAACF,KAAM,CAAC,CAAE,CACnFG,WAAW,CAAC,gBAAgB,CAC5BP,SAAS,CAAC,8LAA8L,CACzM,CAAC,cACFvL,IAAA,WACE0L,IAAI,CAAC,QAAQ,CACbD,OAAO,CAAEA,CAAA,GACPpK,eAAe,CAAC,CAAE,GAAGD,YAAY,CAAEM,eAAe,CAAE,CAACN,YAAY,CAACM,eAAgB,CAAC,CACpF,CACD6J,SAAS,CAAC,6EAA6E,CAAAC,QAAA,CAEtFpK,YAAY,CAACM,eAAe,cAAG1B,IAAA,CAACN,MAAM,EAAC6L,SAAS,CAAC,SAAS,CAAE,CAAC,cAAGvL,IAAA,CAACP,GAAG,EAAC8L,SAAS,CAAC,SAAS,CAAE,CAAC,CACtF,CAAC,EACN,CAAC,cAENrL,KAAA,QAAKqL,SAAS,CAAC,UAAU,CAAAC,QAAA,eACvBxL,IAAA,UACE0L,IAAI,CAAEtK,YAAY,CAACO,mBAAmB,CAAG,MAAM,CAAG,UAAW,CAC7DgK,KAAK,CAAEvK,YAAY,CAACI,eAAgB,CACpCoK,QAAQ,CAAGzB,CAAC,EAAK9I,eAAe,CAAC,CAAE,GAAGD,YAAY,CAAEI,eAAe,CAAE2I,CAAC,CAAC0B,MAAM,CAACF,KAAM,CAAC,CAAE,CACvFG,WAAW,CAAC,8BAA2B,CACvCP,SAAS,CAAC,8LAA8L,CACzM,CAAC,cACFvL,IAAA,WACE0L,IAAI,CAAC,QAAQ,CACbD,OAAO,CAAEA,CAAA,GACPpK,eAAe,CAAC,CACd,GAAGD,YAAY,CACfO,mBAAmB,CAAE,CAACP,YAAY,CAACO,mBACrC,CAAC,CACF,CACD4J,SAAS,CAAC,6EAA6E,CAAAC,QAAA,CAEtFpK,YAAY,CAACO,mBAAmB,cAAG3B,IAAA,CAACN,MAAM,EAAC6L,SAAS,CAAC,SAAS,CAAE,CAAC,cAAGvL,IAAA,CAACP,GAAG,EAAC8L,SAAS,CAAC,SAAS,CAAE,CAAC,CAC1F,CAAC,EACN,CAAC,CAELnK,YAAY,CAACE,eAAe,EAC3BF,YAAY,CAACG,WAAW,EACxBH,YAAY,CAACI,eAAe,eAC1BtB,KAAA,WACEuL,OAAO,CAAE1C,cAAe,CACxBgD,QAAQ,CAAEjL,OAAQ,CAClByK,SAAS,CAAC,uJAAuJ,CAAAC,QAAA,eAEjKxL,IAAA,CAACR,IAAI,EAAC+L,SAAS,CAAC,SAAS,CAAE,CAAC,cAC5BvL,IAAA,SAAAwL,QAAA,CAAM,oBAAe,CAAM,CAAC,EACtB,CACT,EACA,CAAC,EACH,CAAC,EACH,CAAC,cAENxL,IAAA,QAAKuL,SAAS,CAAC,oEAAoE,CAAAC,QAAA,cACjFxL,IAAA,WACEyL,OAAO,CAAEA,CAAA,GAAM5K,mBAAmB,CAAC,KAAK,CAAE,CAC1C0K,SAAS,CAAC,6JAA6J,CAAAC,QAAA,CACxK,cAED,CAAQ,CAAC,CACN,CAAC,EACH,CAAC,CACH,CACN,CAED,KAAM,CAAAQ,aAAa,CAAGA,CAAA,GAAM,CAC1B,OAAQxL,aAAa,EACnB,IAAK,YAAY,CACf,mBACER,IAAA,QAAKuL,SAAS,CAAErK,MAAM,CAAG,MAAM,CAAG,EAAG,CAAAsK,QAAA,cACnCxL,IAAA,CAACJ,iBAAiB,EAChBsB,MAAM,CAAEA,MAAO,CACfF,qBAAqB,CAAEA,qBAAsB,CAC7CC,wBAAwB,CAAEA,wBAAyB,CACnD2C,sBAAsB,CAAEA,sBAAuB,CAC/CC,yBAAyB,CAAEA,yBAA0B,CACrDY,kBAAkB,CAAEA,kBAAmB,CACvCC,qBAAqB,CAAEA,qBAAsB,CAC7C5D,OAAO,CAAEA,OAAQ,CACjBmL,aAAa,CAAE9C,2BAA4B,CAC5C,CAAC,CACC,CAAC,CAGV,IAAK,oBAAoB,CACvB,mBACEnJ,IAAA,QAAKuL,SAAS,CAAErK,MAAM,CAAG,MAAM,CAAG,EAAG,CAAAsK,QAAA,cACnCxL,IAAA,CAACH,kBAAkB,EACjBqB,MAAM,CAAEA,MAAO,CACf+B,SAAS,CAAEA,SAAU,CACrBI,eAAe,CAAEA,eAAgB,CACjCC,kBAAkB,CAAEA,kBAAmB,CACvCI,IAAI,CAAEA,IAAK,CACXC,OAAO,CAAEA,OAAQ,CACjB7C,OAAO,CAAEA,OAAQ,CACjBoL,QAAQ,CAAEhC,uBAAwB,CACnC,CAAC,CACC,CAAC,CAGV,QACE,mBACEhK,KAAA,QAAKqL,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBtL,KAAA,QAAAsL,QAAA,eACExL,IAAA,OAAIuL,SAAS,CAAC,8DAA8D,CAAAC,QAAA,CAAC,wBAE7E,CAAI,CAAC,cACLxL,IAAA,MAAGuL,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAC,wCAEhD,CAAG,CAAC,EACD,CAAC,cAGNxL,IAAA,QAAKuL,SAAS,CAAC,uCAAuC,CAAAC,QAAA,CACnD,CACC,CAAEJ,IAAI,CAAEvM,IAAI,CAAEsN,EAAE,CAAE,aAAa,CAAEhB,KAAK,CAAE,QAAQ,CAAEQ,KAAK,CAAE/I,KAAK,CAACE,eAAgB,CAAC,CAChF,CACEsI,IAAI,CAAEtM,KAAK,CACXqN,EAAE,CAAE,eAAe,CACnBhB,KAAK,CAAE,mBAAmB,CAC1BQ,KAAK,CAAES,IAAI,CAACC,KAAK,CAACzJ,KAAK,CAACG,YAAY,CAAC,CAAG,GAC1C,CAAC,CACD,CAAEqI,IAAI,CAAElM,UAAU,CAAEiN,EAAE,CAAE,eAAe,CAAEhB,KAAK,CAAE,gBAAgB,CAAEQ,KAAK,CAAE9J,IAAI,CAACe,KAAK,CAACI,cAAc,CAAE,CAAC,CACtG,CAACuH,GAAG,CAAC,CAAC+B,IAAI,CAAEC,KAAK,gBAChBvM,IAAA,QAEEuL,SAAS,CAAC,gGAAgG,CAAAC,QAAA,cAE1GtL,KAAA,QAAKqL,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChCxL,IAAA,QAAKuL,SAAS,CAAC,eAAe,CAAAC,QAAA,cAC5BxL,IAAA,QAAKuL,SAAS,CAAE,WAAWe,IAAI,CAACH,EAAE,8CAA+C,CAAAX,QAAA,cAC/ExL,IAAA,CAACsM,IAAI,CAAClB,IAAI,EAACG,SAAS,CAAC,oBAAoB,CAAE,CAAC,CACzC,CAAC,CACH,CAAC,cACNrL,KAAA,QAAKqL,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnBxL,IAAA,MAAGuL,SAAS,CAAC,sDAAsD,CAAAC,QAAA,CAAEc,IAAI,CAACnB,KAAK,CAAI,CAAC,cACpFnL,IAAA,MAAGuL,SAAS,CAAC,yDAAyD,CAAAC,QAAA,CAAEc,IAAI,CAACX,KAAK,CAAI,CAAC,EACpF,CAAC,EACH,CAAC,EAbDY,KAcF,CACN,CAAC,CACC,CAAC,cAENrM,KAAA,QAAKqL,SAAS,CAAC,4FAA4F,CAAAC,QAAA,eACzGxL,IAAA,QAAKuL,SAAS,CAAC,yDAAyD,CAAAC,QAAA,cACtExL,IAAA,OAAIuL,SAAS,CAAC,sDAAsD,CAAAC,QAAA,CAAC,wBAAsB,CAAI,CAAC,CAC7F,CAAC,cAENxL,IAAA,QAAKuL,SAAS,CAAC,iBAAiB,CAAAC,QAAA,cAC9BtL,KAAA,UAAOqL,SAAS,CAAC,QAAQ,CAAAC,QAAA,eACvBxL,IAAA,UAAOuL,SAAS,CAAC,2EAA2E,CAAAC,QAAA,cAC1FxL,IAAA,OAAAwL,QAAA,CACG,CAAC,OAAO,CAAE,OAAO,CAAE,SAAS,CAAE,aAAa,CAAE,QAAQ,CAAC,CAACjB,GAAG,CAAEiC,MAAM,eACjExM,IAAA,OAEEuL,SAAS,CAAC,mGAAmG,CAAAC,QAAA,CAE5GgB,MAAM,EAHFA,MAIH,CACL,CAAC,CACA,CAAC,CACA,CAAC,cACRxM,IAAA,UAAOuL,SAAS,CAAC,yEAAyE,CAAAC,QAAA,CACvFrI,aAAa,CAACsJ,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CAAClC,GAAG,CAAEmC,WAAW,eACzCxM,KAAA,OAAsCqL,SAAS,CAAC,yCAAyC,CAAAC,QAAA,eACvFxL,IAAA,OAAIuL,SAAS,CAAC,6BAA6B,CAAAC,QAAA,cACzCxL,IAAA,SAAMuL,SAAS,CAAC,sDAAsD,CAAAC,QAAA,CACnEkB,WAAW,CAACjE,UAAU,EAAIiE,WAAW,CAAC5I,UAAU,EAAI,GAAG,CACpD,CAAC,CACL,CAAC,cACL9D,IAAA,OAAIuL,SAAS,CAAC,6BAA6B,CAAAC,QAAA,cACzCxL,IAAA,SAAMuL,SAAS,CAAC,0CAA0C,CAAAC,QAAA,CACvDkB,WAAW,CAAChE,KAAK,CAAG,GAAI,CAAAC,IAAI,CAAC+D,WAAW,CAAChE,KAAK,CAAC,CAACiE,kBAAkB,CAAC,OAAO,CAAC,CAAG,GAAG,CAC9E,CAAC,CACL,CAAC,cACL3M,IAAA,OAAIuL,SAAS,CAAC,6BAA6B,CAAAC,QAAA,cACzCtL,KAAA,SAAMqL,SAAS,CAAC,0CAA0C,CAAAC,QAAA,EACvDpJ,MAAM,CAACsK,WAAW,CAAC7D,UAAU,EAAI,CAAC,CAAC,CAAC,GACvC,EAAM,CAAC,CACL,CAAC,cACL7I,IAAA,OAAIuL,SAAS,CAAC,6BAA6B,CAAAC,QAAA,cACzCxL,IAAA,SAAMuL,SAAS,CAAC,0CAA0C,CAAAC,QAAA,CACvD3J,IAAI,CAAC6K,WAAW,CAAC5D,WAAW,CAAC,CAC1B,CAAC,CACL,CAAC,cACL9I,IAAA,OAAIuL,SAAS,CAAC,6BAA6B,CAAAC,QAAA,cACzCxL,IAAA,SACEuL,SAAS,CAAE,0DACTmB,WAAW,CAACjK,MAAM,GAAK,UAAU,CAC7B,mEAAmE,CACnEiK,WAAW,CAACjK,MAAM,GAAK,WAAW,CAClC,uEAAuE,CACvE,+DAA+D,EAClE,CAAA+I,QAAA,CAEFkB,WAAW,CAACjK,MAAM,EAAI,KAAK,CACxB,CAAC,CACL,CAAC,GAjCEiK,WAAW,CAAClE,eAkCjB,CACL,CAAC,CACG,CAAC,EACH,CAAC,CACL,CAAC,EACH,CAAC,EACH,CAAC,CAEZ,CACF,CAAC,CAED,mBACEtI,KAAA,QAAKqL,SAAS,CAAE,8EAA8ErK,MAAM,CAAG,MAAM,CAAG,EAAE,EAAG,CAAAsK,QAAA,EAClH1K,OAAO,eACNd,IAAA,QAAKuL,SAAS,CAAC,mGAAmG,CAAAC,QAAA,cAChHxL,IAAA,QAAKuL,SAAS,CAAC,qFAAqF,CAAAC,QAAA,CAAC,kBAErG,CAAK,CAAC,CACH,CACN,CAGA5K,gBAAgB,EAAI0K,kBAAkB,CAAC,CAAC,cAGzCpL,KAAA,QAAKqL,SAAS,CAAC,4FAA4F,CAAAC,QAAA,eACzGxL,IAAA,QAAKuL,SAAS,CAAC,mDAAmD,CAAAC,QAAA,cAChExL,IAAA,OAAIuL,SAAS,CAAC,oDAAoD,CAAAC,QAAA,CAAC,iBAAe,CAAI,CAAC,CACpF,CAAC,cAENtL,KAAA,QAAKqL,SAAS,CAAC,sBAAsB,CAAAC,QAAA,eACnCxL,IAAA,QAAKuL,SAAS,CAAC,sFAAsF,CAAAC,QAAA,CAAC,UAEtG,CAAK,CAAC,CAELP,SAAS,CAACV,GAAG,CAAE+B,IAAI,EAAK,CACvB,KAAM,CAAAM,aAAa,CAAGN,IAAI,CAAClB,IAAI,CAC/B,KAAM,CAAAyB,QAAQ,CAAGrM,aAAa,GAAK8L,IAAI,CAACpB,EAAE,CAC1C,mBACEhL,KAAA,WAEEuL,OAAO,CAAEA,CAAA,GAAMhL,gBAAgB,CAAC6L,IAAI,CAACpB,EAAE,CAAE,CACzCK,SAAS,CAAE,iGACTsB,QAAQ,CACJ,iHAAiH,CACjH,2EAA2E,EAC9E,CAAArB,QAAA,eAEHxL,IAAA,CAAC4M,aAAa,EACZrB,SAAS,CAAE,WACTsB,QAAQ,CAAG,kCAAkC,CAAG,kCAAkC,EACjF,CACJ,CAAC,cACF7M,IAAA,SAAMuL,SAAS,CAAC,kBAAkB,CAAAC,QAAA,CAAEc,IAAI,CAACnB,KAAK,CAAO,CAAC,CACrD0B,QAAQ,eAAI7M,IAAA,CAACZ,YAAY,EAACmM,SAAS,CAAC,0CAA0C,CAAE,CAAC,GAd7Ee,IAAI,CAACpB,EAeJ,CAAC,CAEb,CAAC,CAAC,EACC,CAAC,cAENlL,IAAA,QAAKuL,SAAS,CAAC,mDAAmD,CAAM,CAAC,EACtE,CAAC,cAGNrL,KAAA,QAAKqL,SAAS,CAAC,sBAAsB,CAAAC,QAAA,eACnCtL,KAAA,WAAQqL,SAAS,CAAC,8HAA8H,CAAAC,QAAA,eAC9IxL,IAAA,QAAKuL,SAAS,CAAC,oBAAoB,CAAAC,QAAA,cACjCxL,IAAA,OAAIuL,SAAS,CAAC,SAAS,CAAAC,QAAA,CACpB,EAAAnL,eAAA,CAAA4K,SAAS,CAAC6B,IAAI,CAAER,IAAI,EAAKA,IAAI,CAACpB,EAAE,GAAK1K,aAAa,CAAC,UAAAH,eAAA,iBAAnDA,eAAA,CAAqD8K,KAAK,GAAI,WAAW,CACxE,CAAC,CACF,CAAC,cAENnL,IAAA,WACE0L,IAAI,CAAC,QAAQ,CACbD,OAAO,CAAEA,CAAA,GAAMhL,gBAAgB,CAAC,UAAU,CAAE,CAC5C8K,SAAS,CAAC,qBAAqB,CAC/B,aAAW,kBAAe,CAAAC,QAAA,cAE1BxL,IAAA,QAAK+M,GAAG,CAAC,kBAAkB,CAACC,GAAG,CAAC,YAAY,CAACzB,SAAS,CAAC,aAAa,CAAE,CAAC,CACjE,CAAC,cAETrL,KAAA,QAAKqL,SAAS,CAAC,8CAA8C,CAAAC,QAAA,eAC3DxL,IAAA,WACEyL,OAAO,CAAEtE,iBAAkB,CAC3BoE,SAAS,CAAC,uIAAuI,CACjJ0B,KAAK,CAAC,qBAAqB,CAAAzB,QAAA,cAE3BxL,IAAA,CAAChB,SAAS,EAACuM,SAAS,CAAC,SAAS,CAAE,CAAC,CAC3B,CAAC,cAETrL,KAAA,QAAKqL,SAAS,CAAC,4BAA4B,CAAAC,QAAA,eACzCxL,IAAA,WACEyL,OAAO,CAAEA,CAAA,GAAM9K,cAAc,CAAC,CAACD,WAAW,CAAE,CAC5C6K,SAAS,CAAC,sHAAsH,CAAAC,QAAA,cAEhIxL,IAAA,QAAKuL,SAAS,CAAC,qEAAqE,CAAAC,QAAA,cAClFxL,IAAA,CAACnB,IAAI,EAAC0M,SAAS,CAAC,uBAAuB,CAAE,CAAC,CACvC,CAAC,CACA,CAAC,cAETvL,IAAA,WACEyL,OAAO,CAAEtK,MAAO,CAChBoK,SAAS,CAAC,+FAA+F,CACzG0B,KAAK,CAAE/L,MAAM,CAAG,WAAW,CAAG,aAAc,CAAAsK,QAAA,CAE3CtK,MAAM,cAAGlB,IAAA,CAACX,GAAG,EAACkM,SAAS,CAAC,SAAS,CAAE,CAAC,cAAGvL,IAAA,CAACV,IAAI,EAACiM,SAAS,CAAC,SAAS,CAAE,CAAC,CAC9D,CAAC,CAER7K,WAAW,eACVR,KAAA,QAAKqL,SAAS,CAAC,4HAA4H,CAAAC,QAAA,eACzItL,KAAA,QAAKqL,SAAS,CAAC,mDAAmD,CAAAC,QAAA,eAChEtL,KAAA,MAAGqL,SAAS,CAAC,sDAAsD,CAAAC,QAAA,EAChEjL,QAAQ,SAARA,QAAQ,iBAARA,QAAQ,CAAEgE,OAAO,CAAC,GAAC,CAAChE,QAAQ,SAARA,QAAQ,iBAARA,QAAQ,CAAE+D,IAAI,EAClC,CAAC,cACJtE,IAAA,MAAGuL,SAAS,CAAC,0CAA0C,CAAAC,QAAA,CAAEjL,QAAQ,SAARA,QAAQ,iBAARA,QAAQ,CAAE6D,KAAK,CAAI,CAAC,EAC1E,CAAC,cACNlE,KAAA,QAAKqL,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnBtL,KAAA,WACEuL,OAAO,CAAEA,CAAA,GAAM,CACb9K,cAAc,CAAC,KAAK,CAAC,CACrBE,mBAAmB,CAAC,IAAI,CAAC,CAC3B,CAAE,CACF0K,SAAS,CAAC,gIAAgI,CAAAC,QAAA,eAE1IxL,IAAA,CAACL,KAAK,EAAC4L,SAAS,CAAC,cAAc,CAAE,CAAC,kBAEpC,EAAQ,CAAC,cACTvL,IAAA,OAAIuL,SAAS,CAAC,2CAA2C,CAAE,CAAC,cAC5DvL,IAAA,WACEyL,OAAO,CAAEnL,QAAS,CAClBiL,SAAS,CAAC,oHAAoH,CAAAC,QAAA,CAC/H,UAED,CAAQ,CAAC,EACN,CAAC,EACH,CACN,EACE,CAAC,EACH,CAAC,EACA,CAAC,cAETxL,IAAA,SAAMuL,SAAS,CAAC,sDAAsD,CAAAC,QAAA,CACnEQ,aAAa,CAAC,CAAC,CACZ,CAAC,EACJ,CAAC,EACH,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}